---
layout: slides
title: MMP 210
week: 9
dek: Dom Library
---


<div class="slide">
	<h2>HTML buttons</h2>
	<p>We can also use HTML buttons in the sketch, which is a lot easier, because they keep track of their own events.  But we need to the <strong>p5 DOM library</strong> for that, <a href="http://p5js.org/download/" target="blank">which can be dowloaded as part of the whole p5 package here.</a></p>
	<p>Then we need to attach it to our HTML page with another script tag:</p>
	<pre><code>&lt;script src="p5.min.js" type="text/javascript"></script>
&lt;script src="p5.dom.min.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;script src="example.js" type="text/javascript"&gt;&lt;/script&gt;</code></pre>
</div>

<div class="slide">
	<pre><code>var r, g, b;
var x, y, w, h;
var angle = 0;
var button;
function setup(){
	createCanvas(720, 360);
	rectMode(CENTER);
	r = random(0, 255);
	g = random(0, 255);
	b = random(0, 255);
	
	button = createButton('Rotate');
	button.mousePressed(rotateAngle);
}
function draw(){
	background("black");
	fill(r, g, b);
	
	push();
	translate(width/2, height/2);
	rotate(angle);
	rect(0, 0, 200, 200);
	pop();
}
function rotateAngle() {
	angle += 0.1;
}
</code></pre>
</div>

<div class="slide">
	<h2>CSS styling</h2>
	<p>Notice where the <code>button</code> element appears in this example, and that it takes on the default CSS styling of a button.  We can use CSS styling to change the position and style of the button.</p>
	<p>Add an inline style into the head section of your <code>index.html</code> document:</p>
	<pre><code>&lt;style&gt;
button {
	background: lightblue;
	color: white;
	padding: 0.5em;
	border: none;
	border-radius: .5em;
	font-size: 18px;
	box-shadow: 2px 2px 0 blue;
	cursor: pointer;
}
&lt;/style&gt;</code></pre>

</div>

<div class="slide">
	<p>By default, buttons created by p5 are position absolute, with a top and left value set by the <code>button.position()</code> function.  We can position it inside of the sketch, but we need to add the sketch to a new container to make that easier.  Since we already have <code>p5.dom.js</code> attached, we can do this easily.</p>
	<p>First we'll add a new <code>div</code> to contain the sketch and it's buttons:</p>
	<pre><code>&lt;div id="sketch"&gt;&lt;/div&gt;</code></pre>
	<p>Then add some styling in that old style.css we haven't touched in a while.  The element width should match the width of our canvas:</p>
	<pre><code>#sketch {
	max-width: 720px;
	margin:0 auto;
	position:relative;
}</code></pre>
</div>
<div class="slide">
	<p>Now that we have the sketch container set up, set the parent of the sketch canvas and any other elements to that sketch:</p>
	<pre><code>var myCanvas = createCanvas(720, 360);
myCanvas.parent("container");</code></pre>
	<p>And we can set the CSS position of the button:</p>
	<pre><code>button.parent("sketch");
button.position(10, 10);</code></pre>
</div>

<div class="slide">
	<h2>More HTML</h2>
	<p>So using HTML form input is another way to let the user interact with our sketch.  We can also take input in the form of text:</p>
	<pre><code>var r, g, b;
var button, input, name;
function setup(){
	var myCanvas = createCanvas(720, 360);
	myCanvas.parent("sketch");
	rectMode(CENTER);
	r = random(0, 255);
	g = random(0, 255);
	b = random(0, 255);
	
	button = createButton('Add your name');
	button.position(10, 40);
	button.mousePressed(addName);
	button.parent("sketch");
	
	input = createInput();
	input.parent("sketch");
	input.position(10, 10);
	
	textSize(40);
	textAlign(CENTER);
}
function draw(){
	background("black");
	fill(r, g, b);
	translate(width/2, height/2);
	rect(0, 0, 200, 200);
	fill("pink");
	stroke("purple");
	strokeWeight(10);
	text(name, 0, 0);
}
function addName() {
	name = input.value();
}</code></pre>
</div>

<div class="slide">
	<p>Check out more examples of HTML and CSS functionality in p5 with this tutorial: <a href="https://github.com/processing/p5.js/wiki/Beyond-the-canvas" target="blank">Beyond the canvas</a></p>
</div>

<div class="slide">
	<h2>keyPress</h2>
	<p>We can also use <code>keyPress</code> events to detect user input.</p>
	<pre><code>var rot = 0, rotSpeed = 0.1;
function setup(){
	var myCanvas = createCanvas(720, 360);
	myCanvas.parent("sketch");
}
function draw(){
	background("black");

	translate(width/2, height/2);

	push();
	rotate(rot);
	rect(0, 0, 40, 40);
	pop();

}
function keyPressed() {
	if (keyCode === UP_ARROW) {
		rot -= rotSpeed;
	} else if (keyCode === DOWN_ARROW) {
		rot += rotSpeed;
	} else if (keyCode === RIGHT_ARROW) {
		rot += rotSpeed;
	} else if (keyCode === LEFT_ARROW) {
		rot -= rotSpeed;
	}
}</code></pre>
</div>