---
layout: slides
title: System Variables
week: 4
---

<div class="slide">
	<h2>setup and draw</h2>
	<p>Before we look at system variables, let's review <code>setup</code> and <code>draw</code>, because we'll need them in our lesson.</p>
	<p><a href="http://p5js.org/reference/#/p5/setup" target="blank">setup</a> is called <strong>once</strong> when the page loads, and defines some initial variables and does other things we only want to do once, like loading image data, or perhaps setting the background color.</p>
	<p><a href="http://p5js.org/reference/#/p5/draw" target="blank">draw</a> after <code>setup</code> is done, <code>draw</code> will loop continuously (unless <code>noLoop</code> is called) until the browser window is closed.  Every line inside of the <code>draw</code> function will be called in order everytime it runs, by default at 60 FPS (frames-per-second).</p>
</div>

<div class="slide">
	<div class="ex" data-preview>var x = 1;
function setup() {
    createCanvas(400, 400);
    background(255);

    fill('plum');
    rect(150, 150, 100, 100); // only gets drawn once
}
function draw() {
// 	background(255); // remove comment
	x++;
	fill('white');
	ellipse(x, 200, 100);
}</div>
</div>

<div class="slide">
	<p><span class="note">A quick note on scope:</span> We'll talk about scope in more detail later in the semester, but at this point it's important to understand that in order for a variable to be used by both <code>setup</code> and <code>draw</code>, it must be declared outside of both functions, usually at the beginning of our program.</p>
	<p>Read more on <a href="http://p5js.org/examples/examples/Data_Variable_Scope.php" target="blank">scope</a>.</p>
</div>

<div class="slide">
	<h2>Static system variables</h2>
	<p>Some basic variables will stay the same throughout the lifetime of your sketch</p>
	<p><code>width</code> and <code>height</code> are static variables that are set to the width and height of the sketch, which is <code>100 x 100</code> by default or whatever is set in <code>createCanvas</code>.</p>
	<p>Let's use <code>width</code> and <code>height</code> to draw a simple grid.</p>
</div>

<div class="slide">
	<div class="ex" data-preview>function setup() {
	createCanvas(640, 360);
	background("white");
	stroke("plum");
	strokeWeight(2);
	line(width/2, 0, width/2, height);
	line(0, height/2, width, height/2);
}</div>
</div>

<div class="slide">
	<h2>Dynamic system variables</h2>
	<p>Some system variables change over time.  <code>mouseX</code> and <code>mouseY</code> change everytime you move your mouse.  They represent the position of the mouse in the p5 canvas.</p>
	<p>To capture those values over time, we need to use a draw loop to capture the movement of our mouse by running the program every frame.</p>
</div>
<div class="slide">
	<div class="ex" data-preview>function draw() {
	background("white");
	strokeWeight(2);
	fill("plum");

	// draw line between the mouse position and origin point
	line(mouseX, mouseY, 0, 0);

	// draw circle at mouse position
	ellipse(mouseX, mouseY, 40);
}</div>
</div>

<div class="slide">
	<p>In the previous example, the ellipse and line move differently but always share one point.</p>
	<p>The line has two points, one is tethered to the bottom right corner of the canvas.  The ellipse has a point for the center and then a size, so the whole shape moves with the mouse.</p>
</div>

<div class="slide">
	<p>p5 also has <code>pmouseX</code> and <code>pmouseY</code> values that keep track of where you mouse was last.</p>
	<div class="ex" data-preview>function draw() {
	background("white");
	strokeWeight(2);
	fill("plum");

	// draw line between current and previous mouse position
	line(mouseX, mouseY, pmouseX, pmouseY);

	// draw an ellipse at each position
	ellipse(pmouseX, pmouseY, 40);
	ellipse(mouseX, mouseY, 20);
}</div>
</div>

<div class="slide">
	<p>The <code>frameCount</code> value is of frames frames the program has run, or how many times it has been drawn.  It goes up by one for every frame.  It's sort of like our earlier example where we incremented <code>x++</code> every frame.</p>
</div>

<div class="slide">
	<div class="ex" data-preview>function draw() {
	background(220);

	// using frameCount as the ellipse size
	ellipse(width/2, height/2, frameCount);
}</div>
</div>

<div class="slide">
	<p>Note that all of those variables work without us writing something like <code>var frameCount = 0;</code> or definining the variables.</p>
	<p>This is part of what p5 does for us, it creates functions like <code>ellipse</code> and variables like <code>width</code> which make it easier to interact with the environment and focus on our code and composition over techinical aspects of the browser and the Canvas API.</p>
</div>

