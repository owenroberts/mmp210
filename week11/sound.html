---
layout: slides
title: MMP 210
week: 11
dek: p5 sound library
---

<div class="slide">
	<p>To use sound in p5 we need to add a library like we did with the DOM library in <a href="../week9/">week 9</a>.  The <a href="https://p5js.org/reference/#/libraries/p5.sound" target="blank">sound library</a> is explained here.  You can <a href="https://raw.githubusercontent.com/processing/p5.js-sound/master/lib/p5.sound.js" target="blank">download it here</a>.</p>
</div>

<div class="slide">
	<p>First thing we have to do is write a new <code>script</code> element to attach the new sound library:</p>
	<pre><code>&lt;script src="../p5.min.js"&gt;&lt;/script&gt;
&lt;script src="../p5.sound.js"&gt;&lt;/script&gt;
&lt;script src="sketch.js"&gt;&lt;/script&gt;</code></pre>
</div>

<div class="slide">
	<p>Let's get started by loading a sound and playing it.</p>
	<p>We can use the screen saver code we wrote but add a sound whenever the ball hits a wall.  We can also use an array to play multiple sounds.  We'll start with one.  To make sounds, there's lot of options.  One of my favorite tools is <a href="http://www.bfxr.net/" target="blank">BFXR</a>, which is a Flash web application ported from <a href="http://drpetter.se/project_sfxr.html" target="blank">sfxr</a>, a program designed to generate 8-bit style sound effects.  There a version for Apple called <a href="http://thirdcog.eu/apps/cfxr" target="blank">cfxr</a> if you want to download the software.</p>
</div>

<div class="slide">
	<p>Once you have generated a sound you like, add it to the folder with <code>sketch.js</code> and <code>index.html</code>.</p>
	<img src="sound-file.png" alt="">
</div>

<div class="slide">
	<p>The sound needs to be preloaded:</p>
	<pre><code>var explosion;
function preload() {
	 explosion = loadSound('Explosion5.wav');
}</code></pre>
</div>

<div class="slide">
	<p>Let's set up a simple sketch:</p>
	<pre><code>function setup() { 
	createCanvas(400,200);
}
function draw() {
	background('black');
}</code></pre>
</div>

<div class="slide">
	<p>And then play sound on <code>mousePressed()</code> just to test:</p>
	<pre><code>function mousePressed() {
	explosion.play();
}</code></pre>
</div>

<div class="slide">
	<p>Cool!</p>
	<p>Let's bring back our <a href="http://alpha.editor.p5js.org/owenroberts/sketches/BknrFeynx">screen saver</a> example, and add an explosion when it hits a wall:</p>
	<pre><code>// screen saver
var x = 10;
var y = 10;
var xupdate = 2;
var yupdate = 1;

function setup() { 
	createCanvas(640, 480);
}

function draw() {
   	background(200);
    ellipse(x, y, 50);
    x += xupdate;
	y += yupdate;
    if (x > width || x <= 0) {
		xupdate *= -1;
    }
	if (y > height || y <= 0) {
		yupdate *= -1;
	}
}</code></pre>
</div>

<div class="slide">
	<p>From here all we do is add the sound code each time we detect hitting a wall with the compound if statements:</p>
	<pre><code>if (x > width || x <= 0) {
	xupdate *= -1;
	explosion.play();
}
if (y > height || y <= 0) {
	yupdate *= -1;
	explosion.play();
}</code></pre>
</div>

<div class="slide">
	<p>Let's add some variety by making a few more sounds, saving them in an array, and then randomly playing them.</p>
	<pre><code>var explosions = [];
function preload() {
	explosions.push( loadSound('Explosion5.wav') );
	explosions.push( loadSound('Explosion20.wav') );
	explosions.push( loadSound('Explosion21.wav') );
	explosions.push( loadSound('Explosion32.wav') );
}</code></pre>
</div>

<div class="slide">
	<p>Update the code to play the explosion with a random selection from the array:</p>
	<pre><code>explosions[floor(random(0,explosions.length))].play();</code></pre>
</div>

<!--  add background music and fuck with pitch -->